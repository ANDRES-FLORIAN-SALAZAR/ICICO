<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administración - Casa de Oración</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <h1><i class="fas fa-cogs"></i> Panel de Administración</h1>
            <p>Casa de Oración - Sistema de Gestión de Contenido</p>
        </div>

        <!-- Navegación -->
        <div class="admin-card">
            <div class="btn-group w-100" role="group">
                <button class="btn-admin" onclick="showSection('anuncios')">
                    <i class="fas fa-bullhorn"></i> Anuncios
                </button>
                <button class="btn-admin" onclick="showSection('eventos')">
                    <i class="fas fa-calendar"></i> Eventos
                </button>
                <button class="btn-admin" onclick="showSection('predicas')">
                    <i class="fas fa-book"></i> Predicaciones
                </button>
                <button class="btn-admin" onclick="showSection('galeria')">
                    <i class="fas fa-images"></i> Galería
                </button>
            </div>
        </div>

        <!-- Sección de Anuncios -->
        <div id="anuncios" class="content-section">
            <div class="admin-card">
                <h3><i class="fas fa-bullhorn"></i> Gestión de Anuncios</h3>
                <form id="anuncioForm">
                    <div class="form-group">
                        <label for="anuncioTitulo">Título del Anuncio</label>
                        <input type="text" class="form-control" id="anuncioTitulo" required>
                    </div>
                    <div class="form-group">
                        <label for="anuncioContenido">Contenido</label>
                        <textarea class="form-control" id="anuncioContenido" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="anuncioFecha">Fecha</label>
                        <input type="date" class="form-control" id="anuncioFecha" required>
                    </div>
                    <button type="submit" class="btn-admin">
                        <i class="fas fa-save"></i> Guardar Anuncio
                    </button>
                </form>
                
                <hr>
                <h4>Anuncios Existentes</h4>
                <div id="anunciosList"></div>
            </div>
        </div>

        <!-- Sección de Eventos -->
        <div id="eventos" class="content-section">
            <div class="admin-card">
                <h3><i class="fas fa-calendar"></i> Gestión de Eventos</h3>
                <form id="eventoForm">
                    <div class="form-group">
                        <label for="eventoTitulo">Título del Evento</label>
                        <input type="text" class="form-control" id="eventoTitulo" required>
                    </div>
                    <div class="form-group">
                        <label for="eventoDescripcion">Descripción</label>
                        <textarea class="form-control" id="eventoDescripcion" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="eventoFecha">Fecha</label>
                        <input type="date" class="form-control" id="eventoFecha" required>
                    </div>
                    <div class="form-group">
                        <label for="eventoHora">Hora</label>
                        <input type="time" class="form-control" id="eventoHora" required>
                    </div>
                    <button type="submit" class="btn-admin">
                        <i class="fas fa-save"></i> Guardar Evento
                    </button>
                </form>
                
                <hr>
                <h4>Eventos Existentes</h4>
                <div id="eventosList"></div>
            </div>
        </div>

        <!-- Sección de Predicaciones -->
        <div id="predicas" class="content-section">
            <div class="admin-card">
                <h3><i class="fas fa-book"></i> Gestión de Predicaciones</h3>
                <form id="predicaForm">
                    <div class="form-group">
                        <label for="predicaTitulo">Título de la Predicación</label>
                        <input type="text" class="form-control" id="predicaTitulo" required>
                    </div>
                    <div class="form-group">
                        <label for="predicaPredicador">Predicador</label>
                        <input type="text" class="form-control" id="predicaPredicador" required>
                    </div>
                    <div class="form-group">
                        <label for="predicaFecha">Fecha</label>
                        <input type="date" class="form-control" id="predicaFecha" required>
                    </div>
                    <div class="form-group">
                        <label for="predicaDescripcion">Descripción</label>
                        <textarea class="form-control" id="predicaDescripcion" rows="3" required></textarea>
                    </div>
                    <button type="submit" class="btn-admin">
                        <i class="fas fa-save"></i> Guardar Predicación
                    </button>
                </form>
                
                <hr>
                <h4>Predicaciones Existentes</h4>
                <div id="predicasList"></div>
            </div>
        </div>

        <!-- Sección de Galería -->
        <div id="galeria" class="content-section">
            <div class="admin-card">
                <h3><i class="fas fa-images"></i> Gestión de Galería</h3>
                <form id="galeriaForm">
                    <div class="form-group">
                        <label for="galeriaTitulo">Título</label>
                        <input type="text" class="form-control" id="galeriaTitulo" required>
                    </div>
                    <div class="form-group">
                        <label for="galeriaDescripcion">Descripción</label>
                        <textarea class="form-control" id="galeriaDescripcion" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="galeriaTipo">Tipo</label>
                        <select class="form-control" id="galeriaTipo" required>
                            <option value="imagen">Imagen</option>
                            <option value="video">Video</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="galeriaUrl">URL del Archivo</label>
                        <input type="url" class="form-control" id="galeriaUrl" required>
                    </div>
                    <button type="submit" class="btn-admin">
                        <i class="fas fa-save"></i> Guardar en Galería
                    </button>
                </form>
                
                <hr>
                <h4>Contenido de Galería</h4>
                <div id="galeriaList"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sistema de gestión de contenido
        class ContentManager {
            constructor() {
                this.loadData();
            }

            loadData() {
                const savedData = localStorage.getItem('casaOracionData');
                if (savedData) {
                    this.data = JSON.parse(savedData);
                } else {
                    this.data = {
                        anuncios: [],
                        eventos: [],
                        predicas: [],
                        galeria: []
                    };
                }
            }

            saveData() {
                localStorage.setItem('casaOracionData', JSON.stringify(this.data));
            }

            addAnuncio(anuncio) {
                anuncio.id = Date.now();
                this.data.anuncios.push(anuncio);
                this.saveData();
                this.renderAnuncios();
            }

            addEvento(evento) {
                evento.id = Date.now();
                this.data.eventos.push(evento);
                this.saveData();
                this.renderEventos();
            }

            addPredica(predica) {
                predica.id = Date.now();
                this.data.predicas.push(predica);
                this.saveData();
                this.renderPredicas();
            }

            addGaleria(item) {
                item.id = Date.now();
                this.data.galeria.push(item);
                this.saveData();
                this.renderGaleria();
            }

            deleteItem(type, id) {
                this.data[type] = this.data[type].filter(item => item.id !== id);
                this.saveData();
                this.renderAll();
            }

            renderAnuncios() {
                const container = document.getElementById('anunciosList');
                container.innerHTML = '';
                
                this.data.anuncios.forEach(anuncio => {
                    const item = document.createElement('div');
                    item.className = 'alert alert-info';
                    item.innerHTML = `
                        <h5>${anuncio.titulo}</h5>
                        <p>${anuncio.contenido}</p>
                        <small>Fecha: ${anuncio.fecha}</small>
                        <button class="btn btn-sm btn-danger float-end" onclick="contentManager.deleteItem('anuncios', ${anuncio.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    `;
                    container.appendChild(item);
                });
            }

            renderEventos() {
                const container = document.getElementById('eventosList');
                container.innerHTML = '';
                
                this.data.eventos.forEach(evento => {
                    const item = document.createElement('div');
                    item.className = 'alert alert-warning';
                    item.innerHTML = `
                        <h5>${evento.titulo}</h5>
                        <p>${evento.descripcion}</p>
                        <small>Fecha: ${evento.fecha} - Hora: ${evento.hora}</small>
                        <button class="btn btn-sm btn-danger float-end" onclick="contentManager.deleteItem('eventos', ${evento.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    `;
                    container.appendChild(item);
                });
            }

            renderPredicas() {
                const container = document.getElementById('predicasList');
                container.innerHTML = '';
                
                this.data.predicas.forEach(predica => {
                    const item = document.createElement('div');
                    item.className = 'alert alert-success';
                    item.innerHTML = `
                        <h5>${predica.titulo}</h5>
                        <p><strong>Predicador:</strong> ${predica.predicador}</p>
                        <p>${predica.descripcion}</p>
                        <small>Fecha: ${predica.fecha}</small>
                        <button class="btn btn-sm btn-danger float-end" onclick="contentManager.deleteItem('predicas', ${predica.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    `;
                    container.appendChild(item);
                });
            }

            renderGaleria() {
                const container = document.getElementById('galeriaList');
                container.innerHTML = '';
                
                this.data.galeria.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'alert alert-secondary';
                    div.innerHTML = `
                        <h5>${item.titulo}</h5>
                        <p>${item.descripcion}</p>
                        <small>Tipo: ${item.tipo}</small><br>
                        <small>URL: ${item.url}</small>
                        <button class="btn btn-sm btn-danger float-end" onclick="contentManager.deleteItem('galeria', ${item.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    `;
                    container.appendChild(div);
                });
            }

            renderAll() {
                this.renderAnuncios();
                this.renderEventos();
                this.renderPredicas();
                this.renderGaleria();
            }
        }

        // Inicializar el gestor de contenido
        const contentManager = new ContentManager();

        // Funciones de navegación
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
        }

        // Manejo de formularios
        document.getElementById('anuncioForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const anuncio = {
                titulo: document.getElementById('anuncioTitulo').value,
                contenido: document.getElementById('anuncioContenido').value,
                fecha: document.getElementById('anuncioFecha').value
            };
            contentManager.addAnuncio(anuncio);
            this.reset();
        });

        document.getElementById('eventoForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const evento = {
                titulo: document.getElementById('eventoTitulo').value,
                descripcion: document.getElementById('eventoDescripcion').value,
                fecha: document.getElementById('eventoFecha').value,
                hora: document.getElementById('eventoHora').value
            };
            contentManager.addEvento(evento);
            this.reset();
        });

        document.getElementById('predicaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const predica = {
                titulo: document.getElementById('predicaTitulo').value,
                predicador: document.getElementById('predicaPredicador').value,
                descripcion: document.getElementById('predicaDescripcion').value,
                fecha: document.getElementById('predicaFecha').value
            };
            contentManager.addPredica(predica);
            this.reset();
        });

        document.getElementById('galeriaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const item = {
                titulo: document.getElementById('galeriaTitulo').value,
                descripcion: document.getElementById('galeriaDescripcion').value,
                tipo: document.getElementById('galeriaTipo').value,
                url: document.getElementById('galeriaUrl').value
            };
            contentManager.addGaleria(item);
            this.reset();
        });

        // Cargar datos al iniciar
        document.addEventListener('DOMContentLoaded', function() {
            contentManager.renderAll();
            showSection('anuncios'); // Mostrar la primera sección por defecto
        });
    </script>
</body>
</html>
